---
phase: 11-entry-display
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - src/components/updates/EntryStreamContainer.tsx
  - src/components/updates/EntryListItem.tsx
  - src/components/updates/TagChip.tsx
  - src/components/updates/UpdatesPageContent.tsx
autonomous: true

must_haves:
  truths:
    - "Each entry shows meta row (date + dot + colored tag chip), Fraunces title, and muted body excerpt"
    - "Entries are separated by thin #2D3140 dividers, not card boxes"
    - "Hovering an entry lifts it with drop shadow, fills cream background, and inverts text colors"
    - "Clicking an entry navigates to /updates/[slug]"
    - "Entry list animates in with staggered Motion on page load"
    - "Tag chips use correct colors per tag type (amber filled for project-launch, outlined for others)"
  artifacts:
    - path: "src/components/updates/EntryListItem.tsx"
      provides: "Single entry in the stream with hover state"
      min_lines: 40
    - path: "src/components/updates/TagChip.tsx"
      provides: "Colored tag chip component"
      min_lines: 20
    - path: "src/components/updates/EntryStreamContainer.tsx"
      provides: "Animated entry list replacing stub"
      min_lines: 20
  key_links:
    - from: "src/components/updates/EntryListItem.tsx"
      to: "/updates/[slug]"
      via: "Next.js Link with viewTransition"
      pattern: "Link.*viewTransition"
    - from: "src/components/updates/EntryStreamContainer.tsx"
      to: "src/lib/motion.ts"
      via: "staggerContainerVariants + fadeUpVariants"
      pattern: "staggerContainerVariants"
    - from: "src/components/updates/TagChip.tsx"
      to: "tag color map"
      via: "TAG_STYLES record lookup"
      pattern: "TAG_STYLES"
---

<objective>
Replace the EntryStreamContainer stub with a fully styled entry list. Create EntryListItem with hover lift effect and TagChip with per-tag colors. Wire staggered Motion animation and View Transition links.

Purpose: Deliver the primary browsing experience -- the entry stream that visitors scan and click into.
Output: Working entry list at /updates with animation, hover states, and navigation to detail pages.
</objective>

<execution_context>
@/Users/lucasalexander/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lucasalexander/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-entry-display/11-01-SUMMARY.md
@src/lib/updates.ts
@src/lib/motion.ts
@src/components/updates/EntryStreamContainer.tsx
@src/components/updates/UpdatesPageContent.tsx
@src/components/providers/MotionProvider.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TagChip component with per-tag color map</name>
  <files>src/components/updates/TagChip.tsx</files>
  <action>
Create a new client component `TagChip.tsx` in `src/components/updates/`.

1. Define TAG_STYLES record mapping UpdateTag to styling:
   ```typescript
   const TAG_STYLES: Record<UpdateTag, { bg: string; text: string; border: string }> = {
     'project-launch': { bg: 'bg-[#D4A843]', text: 'text-[#161921]', border: 'border-transparent' },
     'design-thinking': { bg: 'bg-transparent', text: 'text-[#8B7CC8]', border: 'border-[#8B7CC8]' },
     'business': { bg: 'bg-transparent', text: 'text-[#5B8FA1]', border: 'border-[#5B8FA1]' },
     'community': { bg: 'bg-transparent', text: 'text-[#6B9E78]', border: 'border-[#6B9E78]' },
     'learning': { bg: 'bg-transparent', text: 'text-[#D4A843]', border: 'border-[#D4A843]' },
   }
   ```

2. Props: `{ tag: UpdateTag; className?: string }`

3. Render a `<span>` with:
   - Base classes: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border`
   - Dynamic classes from TAG_STYLES[tag]
   - Display the tag as a readable label: replace hyphens with spaces, capitalize first letter (e.g., "project-launch" -> "Project launch")

4. Export both the component and TAG_STYLES (TAG_STYLES is needed by EntryListItem for hover color inversion).
  </action>
  <verify>
   - `npx tsc --noEmit` passes
   - File exists and exports TagChip + TAG_STYLES
  </verify>
  <done>TagChip renders correct colors for each tag type: solid amber fill for project-launch, outlined with colored stroke/text for all others</done>
</task>

<task type="auto">
  <name>Task 2: Create EntryListItem and replace EntryStreamContainer stub</name>
  <files>src/components/updates/EntryListItem.tsx, src/components/updates/EntryStreamContainer.tsx, src/components/updates/UpdatesPageContent.tsx</files>
  <action>
**Before implementing:** Read `src/components/providers/MotionProvider.tsx` and confirm it uses LazyMotion with `domMax` or `domAnimation` features. The `whileHover` prop on `m.article` requires gesture support -- `domMax` includes it, `domAnimation` does NOT. If MotionProvider only loads `domAnimation`, you must switch it to `domMax` or use CSS hover instead. The existing codebase uses `domMax` (verified in research), but confirm before proceeding.

**EntryListItem.tsx** -- Create new client component:

1. Props: `{ entry: UpdateEntry }` (import UpdateEntry from `@/lib/updates`)

2. Structure (top to bottom within the clickable area):
   - **Meta row:** Date (formatted as "Month Year" using a static month-name lookup array -- NOT toLocaleDateString, which causes hydration issues) + a small bullet dot (text-text-muted) + TagChip
   - **Title:** Fraunces (font-serif), 20px (`text-[20px]`), text-text-primary
   - **Excerpt:** The entry's `summary` field displayed as muted text (text-text-muted, text-sm, line-clamp-2). Use `entry.summary` directly -- this is a required frontmatter field in UpdateEntry (established in Phase 9, validated by validateFrontmatter). Do NOT truncate the HTML body. The CONTEXT.md decision was revised to reflect this data model reality.

3. Date formatting helper (define inside file or as a utility):
   ```typescript
   const MONTHS = ['January','February','March','April','May','June','July','August','September','October','November','December']
   function formatDate(date: string): string {
     const [year, month] = date.split('-')
     return `${MONTHS[parseInt(month, 10) - 1]} ${year}`
   }
   ```

4. Wrapping and hover:
   - The entire entry is wrapped in a `<Link href={`/updates/${entry.slug}`} viewTransition>` from `next/link`
   - Use `m.article` (from `motion/react`) for the hover animation
   - Padding: `py-7` (28px top and bottom)
   - Bottom border: `border-b border-[#2D3140]`
   - Cursor: `cursor-pointer`
   - Hover effect via Motion `whileHover`:
     ```typescript
     whileHover={{
       y: -2,
       boxShadow: '0 8px 24px oklch(0.08 0.015 250 / 0.15)',
       transition: { duration: 0.15 }
     }}
     ```
   - For the cream background fill and text color inversion on hover, use Tailwind `group` pattern:
     - Add `group` class to the Link wrapper
     - On the m.article, add: `group-hover:bg-[#EDE5D4]` (cream fill)
     - On title: `group-hover:text-[#161921]` (dark text on cream)
     - On date/dot: `group-hover:text-[#555]` (darker muted on cream)
     - On excerpt: `group-hover:text-[#444]` (readable on cream)
   - Apply `transition-colors duration-150` to elements that change color on hover for smooth transition

**EntryStreamContainer.tsx** -- Replace the stub entirely:

1. Keep it as a `'use client'` component
2. Import `m` from `motion/react` (NOT `motion` -- use `m` with LazyMotion)
3. Import `staggerContainerVariants` and `fadeUpVariants` from `@/lib/motion`
4. Import `EntryListItem` from `./EntryListItem`
5. Wrap the list in `m.div` with:
   ```typescript
   <m.div
     variants={staggerContainerVariants}
     initial="hidden"
     animate="visible"
     aria-label="Updates stream"
   >
     {entries.map((entry) => (
       <m.div key={entry.slug} variants={fadeUpVariants}>
         <EntryListItem entry={entry} />
       </m.div>
     ))}
   </m.div>
   ```

**UpdatesPageContent.tsx** -- No structural changes needed. The component already passes entries to EntryStreamContainer. Just verify it still works after the EntryStreamContainer replacement. If it imports anything that changed, update accordingly.
  </action>
  <verify>
   - `npx tsc --noEmit` passes
   - `npm run build` succeeds
   - Grep EntryStreamContainer.tsx for `staggerContainerVariants`
   - Grep EntryListItem.tsx for `whileHover`, `viewTransition`, `group-hover`
   - Grep EntryListItem.tsx for `entry.summary` (confirm summary field used, not body truncation)
  </verify>
  <done>Entry list shows formatted date + tag chip + title + excerpt (from summary field) per entry, entries are separated by thin dividers, hover lifts with cream background and inverted text, clicking navigates to /updates/[slug], list staggers in on page load</done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- EntryStreamContainer uses staggerContainerVariants + fadeUpVariants from motion.ts
- EntryListItem has hover lift (whileHover y: -2), cream background (group-hover), and Link with viewTransition
- EntryListItem uses `entry.summary` for excerpt (not HTML body truncation)
- TagChip renders correct color per tag type
- Date displays as "Month Year" using static lookup (no toLocaleDateString)
- MotionProvider confirmed to load domMax features (required for whileHover)
</verification>

<success_criteria>
- Entries render as flat list items with thin dividers
- Each entry: meta row (date + dot + tag chip), Fraunces 20px title, muted excerpt from summary field
- Hover: lifts with shadow, cream bg fill, dark text inversion, pointer cursor
- Click navigates to /updates/[slug] with View Transition
- Staggered Motion animation on page load
- All 5 tag types render with correct colors
</success_criteria>

<output>
After completion, create `.planning/phases/11-entry-display/11-02-SUMMARY.md`
</output>
