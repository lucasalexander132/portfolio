---
phase: 07-language-switcher
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/layout/LanguageSwitcher.tsx
  - src/lib/i18n.tsx
  - src/components/layout/Navigation.tsx
autonomous: true

must_haves:
  truths:
    - "Language toggle is visible in navbar with FR stacked on top, EN on bottom"
    - "Clicking a language option switches all visible text immediately (no page reload)"
    - "Navigation labels display in the selected language"
  artifacts:
    - path: "src/components/layout/LanguageSwitcher.tsx"
      provides: "Vertical FR/EN button stack component"
      min_lines: 30
      exports: ["LanguageSwitcher"]
    - path: "src/lib/i18n.tsx"
      provides: "HTML lang attribute sync on locale change"
      contains: "document.documentElement.lang"
    - path: "src/components/layout/Navigation.tsx"
      provides: "Translated nav labels and integrated language switcher"
      contains: "useTranslations"
  key_links:
    - from: "src/components/layout/LanguageSwitcher.tsx"
      to: "src/lib/i18n.tsx"
      via: "useLocale hook for locale state"
      pattern: "useLocale\\(\\)"
    - from: "src/components/layout/Navigation.tsx"
      to: "src/lib/i18n.tsx"
      via: "useTranslations hook for translated labels"
      pattern: "useTranslations\\(\\)"
    - from: "src/components/layout/Navigation.tsx"
      to: "src/components/layout/LanguageSwitcher.tsx"
      via: "Component import and render"
      pattern: "import.*LanguageSwitcher"
---

<objective>
Create language switcher UI and integrate translations into navigation.

Purpose: Enable visitors to switch between English and French instantly from the navbar (I18N-05, I18N-06), with navigation labels displaying in the selected language (I18N-11).

Output: LanguageSwitcher component integrated into Navigation, with all nav labels and cursor text driven by translations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-language-switcher/07-RESEARCH.md
@.planning/phases/06-translation-infrastructure/06-02-SUMMARY.md
@src/lib/i18n.tsx
@src/components/layout/Navigation.tsx
@src/lib/motion.ts
@messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LanguageSwitcher component and add HTML lang sync</name>
  <files>
    src/components/layout/LanguageSwitcher.tsx
    src/lib/i18n.tsx
  </files>
  <action>
Create LanguageSwitcher.tsx as a client component with:
- Vertical button stack (flex-col) with FR on top, EN on bottom
- Uses useLocale() hook to get current locale and setLocale function
- Uses useCursor() hook for custom cursor on hover (match existing nav pattern)
- m.button from motion/react with whileTap={{ scale: 0.95 }} and springSnappy transition
- aria-pressed={isActive} on each button to indicate current selection
- role="group" and aria-label="Language selection" on container
- lang attribute on each button (lang="fr" and lang="en") for screen reader pronunciation
- Active button: bg-amber-500 text-base-950 cursor-default
- Inactive button: text-text-secondary hover:text-amber-500 cursor-pointer
- focus-visible ring styling for keyboard accessibility
- Disable whileTap and cursor effects on active button (already selected)

Add to LocaleProvider in i18n.tsx:
- useEffect that syncs document.documentElement.lang = locale whenever locale changes
- Place this after the browser detection useEffect

Reference 07-RESEARCH.md "Complete LanguageSwitcher Component" example for implementation details.
  </action>
  <verify>
TypeScript compiles without errors:
```bash
npx tsc --noEmit
```
  </verify>
  <done>
LanguageSwitcher component exports and can be imported. HTML lang attribute updates when locale changes via setLocale.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate LanguageSwitcher into Navigation with translated labels</name>
  <files>
    src/components/layout/Navigation.tsx
  </files>
  <action>
Update Navigation.tsx to use translations and include language switcher:

1. Import useTranslations from @/lib/i18n
2. Import LanguageSwitcher from ./LanguageSwitcher
3. Call t = useTranslations() inside component

4. Replace hardcoded navLinks array with translation-driven navItems defined INSIDE the component:
```typescript
const navItems = [
  { href: '#services', labelKey: 'nav.services' as const, cursorKey: 'cursor.what_ill_do' as const },
  { href: '#projects', labelKey: 'nav.projects' as const, cursorKey: 'cursor.what_ive_done' as const },
] as const
```

5. Update the nav links map to use translations:
- {t(labelKey)} instead of {label}
- setCursorVariant('text', t(cursorKey), true) instead of cursorText

6. Add LanguageSwitcher component after the Contact icon button, before the closing div of the nav container:
```tsx
{/* Language Switcher */}
<LanguageSwitcher />
```

This places the language switcher as the rightmost element in the navbar (common pattern per research).
  </action>
  <verify>
TypeScript compiles and nav labels update when language changes:
```bash
npx tsc --noEmit
```
Verify in browser: clicking FR shows French nav labels, clicking EN shows English labels, no page reload occurs.
  </verify>
  <done>
Navigation displays translated labels. LanguageSwitcher visible in navbar with FR on top, EN on bottom. Clicking language option instantly switches all visible text without page reload.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npx tsc --noEmit` passes
2. Visual check: navbar shows language switcher with FR stacked above EN
3. Functional check: clicking FR switches nav labels to French, clicking EN switches to English
4. No page reload occurs during language switching
5. HTML lang attribute updates (inspect document.documentElement.lang in devtools)
6. Cursor text translates when hovering nav items in different languages
</verification>

<success_criteria>
- Language toggle visible in navbar with FR on top, EN on bottom (I18N-05)
- Clicking language option switches all visible text immediately without page reload (I18N-06)
- Navigation labels display in selected language (I18N-11)
- Accessible: aria-pressed indicates current selection, keyboard navigable
</success_criteria>

<output>
After completion, create `.planning/phases/07-language-switcher/07-01-SUMMARY.md`
</output>
