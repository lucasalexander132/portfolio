---
phase: 13-navigation-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - messages/en.json
  - messages/fr.json
  - src/components/updates/ContactCTA.tsx
  - src/app/updates/layout.tsx
  - src/app/updates/page.tsx
autonomous: true

must_haves:
  truths:
    - "Updates pages render with Navigation bar and Footer"
    - "A persistent contact CTA appears on the /updates page linking back to the homepage contact form"
    - "All new text is translated in both EN and FR"
  artifacts:
    - path: "src/app/updates/layout.tsx"
      provides: "Shared chrome (Navigation + Footer) for all /updates routes"
      contains: "Navigation"
    - path: "src/components/updates/ContactCTA.tsx"
      provides: "Persistent contact call-to-action section"
      contains: "contact"
    - path: "messages/en.json"
      provides: "English translations for new nav and CTA keys"
      contains: "nav.updates"
    - path: "messages/fr.json"
      provides: "French translations for new nav and CTA keys"
      contains: "nav.updates"
  key_links:
    - from: "src/app/updates/layout.tsx"
      to: "src/components/layout/Navigation.tsx"
      via: "import and render"
      pattern: "import.*Navigation"
    - from: "src/components/updates/ContactCTA.tsx"
      to: "/"
      via: "Link href"
      pattern: "href.*contact"
---

<objective>
Add i18n keys, create the updates layout with shared Navigation/Footer chrome, and build the ContactCTA component.

Purpose: Updates pages currently have no site navigation or footer. This plan adds the shared layout wrapper and a contact CTA so visitors can navigate the site and reach out from /updates.
Output: Updates layout with Navigation + Footer, ContactCTA component, updated i18n files.
</objective>

<execution_context>
@/Users/lucasalexander/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lucasalexander/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/layout/Navigation.tsx
@src/components/layout/Footer.tsx
@src/app/updates/page.tsx
@src/components/updates/UpdatesPageContent.tsx
@src/app/page.tsx
@messages/en.json
@messages/fr.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add i18n keys and create ContactCTA component</name>
  <files>
    messages/en.json
    messages/fr.json
    src/components/updates/ContactCTA.tsx
  </files>
  <action>
    1. Add these keys to `messages/en.json`:
       - `nav.updates`: `"Updates"`
       - `cursor.latest_updates`: `"What's New"`
       - `updates.cta.title`: `"Have a project in mind?"`
       - `updates.cta.description`: `"Let's talk about how I can help."`
       - `updates.cta.button`: `"Get in Touch"`
       - `footer.cursor.updates`: `"What's New"`

    2. Add matching keys to `messages/fr.json`:
       - `nav.updates`: `"Mises à jour"`
       - `cursor.latest_updates`: `"Quoi de neuf"`
       - `updates.cta.title`: `"Un projet en tête ?"`
       - `updates.cta.description`: `"Parlons de comment je peux vous aider."`
       - `updates.cta.button`: `"Prendre contact"`
       - `footer.cursor.updates`: `"Quoi de neuf"`

    3. Create `src/components/updates/ContactCTA.tsx` as a client component:
       - Use `'use client'` directive
       - Import `useTranslations` from `@/lib/i18n`
       - Import `Link` from `next/link`
       - Render a section with `max-w-3xl mx-auto px-6 py-16` to match UpdatesPageContent width
       - Inside: a bordered card (`border border-base-700/30 rounded-2xl p-8 bg-base-800/30`) with:
         - `t('updates.cta.title')` as heading (font-serif, text-h3, text-text-primary)
         - `t('updates.cta.description')` as paragraph (text-text-muted, mt-2)
         - A `Link` to `/#contact` with `t('updates.cta.button')` styled as pill button (bg-amber-500 text-base-950 px-6 py-3 rounded-lg font-medium hover:bg-amber-400 transition-colors, mt-6 inline-block)
       - Note: Use `/#contact` as the href. The homepage Navigation already listens for `openContactForm` custom events, but cross-page navigation via anchor is simpler and more reliable. The homepage handleClick scrolls to `#contact` section -- but wait, there IS no #contact section, the contact form is opened via the mail button. So instead: use `Link href="/"` and add an `onClick` that on the homepage dispatches the `openContactForm` event. Actually the simplest approach: just link to `/` since the contact form is modal-based, not a section. BUT for cross-page triggering, use a query param approach: `Link href="/?contact=open"`. Then in Navigation.tsx (Plan 02), read this param on mount and auto-open. HOWEVER, to keep Plan 01 simple and independent: just use `Link href="/"` with a clear button label "Get in Touch". The CTA's purpose is to route them back home where the contact button is prominent. Keep it simple.
       - Final decision: Use `<Link href="/">` with button text from i18n. The nav bar's mail icon on the homepage makes contacting obvious. No query param complexity needed.
  </action>
  <verify>
    - `npx tsc --noEmit` passes (all i18n keys type-check)
    - ContactCTA.tsx exists and imports compile correctly
  </verify>
  <done>
    - en.json and fr.json contain all 6 new keys each
    - ContactCTA renders a translated card with a link back to homepage
  </done>
</task>

<task type="auto">
  <name>Task 2: Create updates layout and wire ContactCTA</name>
  <files>
    src/app/updates/layout.tsx
    src/app/updates/page.tsx
  </files>
  <action>
    1. Create `src/app/updates/layout.tsx`:
       - This is a SERVER component (no 'use client' needed -- it just composes layout)
       - Actually, Navigation and Footer are client components that use hooks (useCursor, useTranslations). They can be imported into a server layout and will render as client components automatically.
       - BUT: Navigation uses `useCursor` which requires CursorProvider context. Check if the root layout provides CursorProvider. If not, the updates layout needs to wrap children in required providers.
       - Structure:
         ```tsx
         import { Navigation } from '@/components/layout/Navigation'
         import { Footer } from '@/components/layout/Footer'

         export default function UpdatesLayout({ children }: { children: React.ReactNode }) {
           return (
             <div className="min-h-screen bg-base-900">
               <Navigation />
               <div className="pt-4">
                 {children}
               </div>
               <Footer />
             </div>
           )
         }
         ```
       - CRITICAL: The homepage uses `fixed inset-0 p-3` framed-card layout defined in page.tsx. The updates layout must NOT use this. Updates pages are standard scrollable pages with `min-h-screen bg-base-900`.
       - The Navigation is `fixed` positioned at bottom center. On updates pages this will float over the scrollable content, which is fine. Add enough bottom padding on the page content so it doesn't overlap the last entries.

    2. Modify `src/app/updates/page.tsx`:
       - Import `ContactCTA` from `@/components/updates/ContactCTA`
       - Add `<ContactCTA />` AFTER the `<Suspense>` block wrapping UpdatesPageContent, so it appears below the entry stream
       - The ContactCTA sits outside Suspense since it has no async data dependency
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` succeeds (updates routes render with layout)
  </verify>
  <done>
    - `/updates` route renders with Navigation bar at bottom and Footer below content
    - `/updates/[slug]` detail pages also get Navigation and Footer via shared layout
    - ContactCTA appears below the entry stream on `/updates`
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors
- `npm run build` completes successfully
- All new i18n keys exist in both en.json and fr.json with matching structure
</verification>

<success_criteria>
- Updates pages render inside a layout with Navigation and Footer
- ContactCTA component displays translated heading, description, and link button
- No TypeScript errors, build passes
</success_criteria>

<output>
After completion, create `.planning/phases/13-navigation-integration/13-01-SUMMARY.md`
</output>
