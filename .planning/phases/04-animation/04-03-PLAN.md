---
phase: 04-animation
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/sections/Services.tsx
  - src/components/sections/Projects.tsx
  - src/components/sections/ProjectCard.tsx
  - src/components/layout/Navigation.tsx
autonomous: true

must_haves:
  truths:
    - "Below-fold sections animate into view when 25% visible"
    - "Children within sections stagger at ~0.08s intervals"
    - "Animations trigger only once (stay visible after reveal)"
    - "Project cards lift with subtle spring on hover"
    - "Buttons scale down slightly on press"
    - "Nav link underlines slide in on hover"
  artifacts:
    - path: "src/components/sections/Services.tsx"
      provides: "Scroll-triggered fade-up animation"
      contains: "useInView"
    - path: "src/components/sections/Projects.tsx"
      provides: "Scroll-triggered stagger animation for grid"
      contains: "staggerContainerVariants"
    - path: "src/components/sections/ProjectCard.tsx"
      provides: "Spring hover lift animation"
      contains: "whileHover"
  key_links:
    - from: "src/components/sections/Services.tsx"
      to: "src/lib/motion.ts"
      via: "Variant imports"
      pattern: "fadeUpVariants.*staggerContainerVariants"
    - from: "src/components/sections/ProjectCard.tsx"
      to: "src/lib/motion.ts"
      via: "Spring import"
      pattern: "springSubtle"
---

<objective>
Add scroll-triggered reveal animations to below-fold sections and interactive hover/tap states to cards and buttons.

Purpose: Motion guides attention without demanding it. Scroll reveals create "discovery" feeling. Hover states provide tactile feedback.

Output: Services and Projects sections with scroll reveal, ProjectCard with spring hover, buttons with press scale
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-animation/04-CONTEXT.md
@.planning/phases/04-animation/04-RESEARCH.md
@.planning/phases/04-animation/04-01-SUMMARY.md
@src/components/sections/Services.tsx
@src/components/sections/Projects.tsx
@src/components/sections/ProjectCard.tsx
@src/components/layout/Navigation.tsx
@src/lib/motion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scroll reveal to Services and Projects sections</name>
  <files>
    - src/components/sections/Services.tsx
    - src/components/sections/Projects.tsx
  </files>
  <action>
**Services.tsx:**

1. Add 'use client' directive (required for useInView)

2. Add imports:
   - `import { useRef } from 'react'`
   - `import { m, useInView } from 'motion/react'`
   - `import { fadeUpVariants, staggerContainerVariants } from '@/lib/motion'`

3. Create ref and inView hook:
   ```tsx
   const sectionRef = useRef(null)
   const isInView = useInView(sectionRef, {
     once: true,      // Only animate once
     amount: 0.25,    // Trigger at 25% visible
   })
   ```

4. Convert section to m.section:
   - Add ref={sectionRef}
   - initial="hidden"
   - animate={isInView ? "visible" : "hidden"}
   - variants={staggerContainerVariants}

5. Wrap section header (h2, p) in m.div with fadeUpVariants

6. Convert each service article to m.article with variants={fadeUpVariants}
   - Remove article wrapper, just add variants to existing article

Note: Service cards do NOT have hover state (per CONTEXT.md - static, not interactive)

**Projects.tsx:**

1. Already has 'use client' - keep it

2. Add imports:
   - `import { useRef } from 'react'`
   - `import { m, useInView } from 'motion/react'`
   - `import { fadeUpVariants, staggerContainerVariants } from '@/lib/motion'`

3. Create ref and inView hook (same as Services):
   ```tsx
   const sectionRef = useRef(null)
   const isInView = useInView(sectionRef, { once: true, amount: 0.25 })
   ```

4. Convert section to m.section with staggerContainerVariants

5. Wrap section header in m.div with fadeUpVariants

6. Convert project grid div to m.div with variants (for child stagger)

7. Each ProjectCard already handles its own animation via props (next task)
   - Just ensure parent passes correct props for stagger timing
  </action>
  <verify>
    - `grep -q "useInView" src/components/sections/Services.tsx`
    - `grep -q "useInView" src/components/sections/Projects.tsx`
    - `grep -q "'use client'" src/components/sections/Services.tsx`
    - `grep -q "staggerContainerVariants" src/components/sections/Services.tsx`
    - TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>
    Services and Projects sections animate in when 25% visible, with staggered children.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add spring hover to ProjectCard and interactive states</name>
  <files>
    - src/components/sections/ProjectCard.tsx
    - src/components/layout/Navigation.tsx
  </files>
  <action>
**ProjectCard.tsx:**

1. Import motion:
   - `import { m } from 'motion/react'`
   - `import { springSubtle, fadeUpVariants } from '@/lib/motion'`

2. Convert article to m.article:
   - Add variants={fadeUpVariants} (inherits from parent stagger)
   - Add whileHover={{ y: -4 }} with transition={springSubtle}
   - Add whileTap={{ scale: 0.98 }} for press feedback
   - Keep existing CSS transition for shadow (Tailwind handles this well)
   - Remove the Tailwind `hover:-translate-y-1` class (motion handles this now)

3. Ensure focus states remain intact (keep focus-visible classes)

**Navigation.tsx:**

1. Import motion:
   - `import { m } from 'motion/react'`

2. Add underline animation to nav links:
   - For non-primary links, wrap text in a container with relative positioning
   - Add m.span for underline: absolute bottom-0 left-0 w-full h-0.5 bg-amber-500
   - Animate with scaleX: initial={{ scaleX: 0 }}, whileHover={{ scaleX: 1 }}
   - transformOrigin: "left" so it slides in from left

3. Primary (Contact) button:
   - Convert to m.a
   - Add whileTap={{ scale: 0.97 }} with springSnappy transition
   - Keep existing hover color transition (CSS)

4. Logo button:
   - Add whileTap={{ scale: 0.95 }} for press feedback
  </action>
  <verify>
    - `grep -q "whileHover" src/components/sections/ProjectCard.tsx`
    - `grep -q "springSubtle" src/components/sections/ProjectCard.tsx`
    - `grep -q "scaleX" src/components/layout/Navigation.tsx` (underline animation)
    - `grep -q "whileTap" src/components/layout/Navigation.tsx`
    - TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>
    ProjectCard has spring hover lift. Nav links have sliding underline. Buttons have press scale.
  </done>
</task>

</tasks>

<verification>
1. Scroll reveals:
   - Services section fades up when scrolled into view
   - Service cards stagger in sequence
   - Projects section fades up when scrolled into view
   - Project cards stagger in sequence
   - Animations only happen once (scrolling up/down doesn't re-trigger)

2. Interactive states:
   - Project cards lift 4px with spring on hover
   - Project cards scale down on press/tap
   - Nav link underlines slide in from left on hover
   - Contact button scales down on press

3. Performance:
   - Uses `m` component throughout (bundle optimized)
   - Animations feel smooth (spring physics)
   - No janky scroll behavior
</verification>

<success_criteria>
- Services section has scroll-triggered fade-up with staggered cards
- Projects section has scroll-triggered fade-up with staggered grid
- ProjectCard lifts 4px with subtle spring on hover
- Nav links have sliding underline on hover
- Buttons scale down on press with snappy spring
- Service cards remain static (no hover state)
- All animations use `m` component, not `motion`
</success_criteria>

<output>
After completion, create `.planning/phases/04-animation/04-03-SUMMARY.md`
</output>
