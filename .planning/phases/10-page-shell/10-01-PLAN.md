---
phase: 10-page-shell
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/now.ts
  - src/content/now.md
  - messages/en.json
  - messages/fr.json
autonomous: true

must_haves:
  truths:
    - "getNow() returns typed NowEntry with bilingual focus and learning fields"
    - "Translation keys for updates page chrome exist in both en.json and fr.json"
    - "now.md file is the single source of truth for the now section content"
  artifacts:
    - path: "src/lib/now.ts"
      provides: "getNow() utility function"
      exports: ["getNow", "NowEntry"]
    - path: "src/content/now.md"
      provides: "Now section frontmatter data"
      contains: "focus_en"
    - path: "messages/en.json"
      provides: "English translation keys for updates page"
      contains: "updates"
    - path: "messages/fr.json"
      provides: "French translation keys for updates page"
      contains: "updates"
  key_links:
    - from: "src/lib/now.ts"
      to: "src/content/now.md"
      via: "fs.readFileSync with gray-matter"
      pattern: "readFileSync.*now\\.md"
---

<objective>
Create the data layer and i18n keys for the updates page shell.

Purpose: Plan 02 (page + components) needs getNow() to read the "now" section content, and translation keys for all page chrome. This plan creates those foundations.
Output: src/lib/now.ts utility, src/content/now.md data file, and updated translation JSON files.
</objective>

<execution_context>
@/Users/lucasalexander/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lucasalexander/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/updates.ts
@messages/en.json
@messages/fr.json
@src/types/i18n.d.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create now.ts utility and now.md content file</name>
  <files>src/lib/now.ts, src/content/now.md</files>
  <action>
Create `src/content/now.md` with frontmatter-only content (no markdown body needed):

```yaml
---
focus_en: "Building the Civix Solutions portfolio updates stream"
focus_fr: "Developpement du flux de mises a jour du portfolio Civix Solutions"
learning_en: "Next.js 16 App Router patterns and React 19 transitions"
learning_fr: "Modeles Next.js 16 App Router et transitions React 19"
updated: "2026-02-19"
---
```

Use proper French accented characters (e, a with accents etc.) -- the above is just a placeholder representation.

Create `src/lib/now.ts` that:
- Imports `'server-only'` at the top (prevents accidental client import)
- Uses `readFileSync` from `node:fs` (synchronous is fine for a single small file)
- Uses `path.join(process.cwd(), 'src', 'content', 'now.md')` to locate the file
- Uses `gray-matter` to parse frontmatter
- Exports a `NowEntry` interface with fields: `focus_en: string`, `focus_fr: string`, `learning_en: string`, `learning_fr: string`, `updated: string`
- Exports a `getNow(): NowEntry` function that reads and returns the parsed frontmatter
- No caching needed -- single small file read

Follow the same import pattern as `src/lib/updates.ts` for gray-matter. Use synchronous `readFileSync` (not async) since this is a single trivial file and it simplifies the call site in generateMetadata.
  </action>
  <verify>
Run `npx tsc --noEmit` -- should compile without errors. The NowEntry type and getNow export should be resolvable.
  </verify>
  <done>
`getNow()` returns a typed `NowEntry` object from `now.md` frontmatter. TypeScript compiles cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add updates translation keys to en.json and fr.json</name>
  <files>messages/en.json, messages/fr.json</files>
  <action>
Add an `"updates"` key to both `messages/en.json` and `messages/fr.json` at the top level (alongside existing keys like "nav", "hero", "services", etc.).

English keys (`messages/en.json`):
```json
"updates": {
  "pageTitle": "Updates",
  "now": {
    "focus": "Current focus",
    "learning": "Currently learning",
    "lastUpdated": "Last updated"
  }
}
```

French keys (`messages/fr.json`):
```json
"updates": {
  "pageTitle": "Mises a jour",
  "now": {
    "focus": "En ce moment",
    "learning": "En cours d'apprentissage",
    "lastUpdated": "Mis a jour le"
  }
}
```

Use proper French accented characters (e.g., "Mises a jour" should be "Mises \u00e0 jour", "Mis a jour" should be "Mis \u00e0 jour"). The TranslationKey type in `src/types/i18n.d.ts` auto-derives from the en.json structure, so adding keys to en.json automatically makes them available as `t('updates.pageTitle')`, `t('updates.now.focus')`, etc. The fr.json MUST have the exact same key structure.
  </action>
  <verify>
Run `npx tsc --noEmit` -- should compile without errors. The new keys should be valid TranslationKey values.
  </verify>
  <done>
`t('updates.pageTitle')` returns "Updates" in EN and "Mises \u00e0 jour" in FR. All nested now-section keys exist in both files with matching structure.
  </done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with no errors
- `src/lib/now.ts` exports `getNow` and `NowEntry`
- `src/content/now.md` exists with all 5 frontmatter fields
- `messages/en.json` and `messages/fr.json` both have `updates.pageTitle`, `updates.now.focus`, `updates.now.learning`, `updates.now.lastUpdated`
</verification>

<success_criteria>
- getNow() is importable and returns typed NowEntry
- Translation keys for updates page are available in both locales
- TypeScript compiles cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/10-page-shell/10-01-SUMMARY.md`
</output>
